{% assign players = include.results.players %}
{% assign results = include.results.pairings %}
{% assign playercount = players.size %}
{% assign includeplace = players[0].place %}
{% assign includerating = players[0].rating %}

<table class="all-play-all">
	<thead>
		<tr>
			{% if includeplace %}
				<th>Place</th>
			{% endif %}
			<th class="player-name">Player</th>
			{% if includerating %}
				<th>Rating</th>
			{% endif %}
			<th colspan="{{ playercount }}">Results</th>
			<th class="score" colspan="2">Score</th>
		</tr>
	</thead>
	<tfoot>
		<tr>
			<td colspan="2" class="dead-space">&nbsp;</td>
			{% for player in players %}
				<td class="player-name-vertical">
					{% include snippets/member_link.html value=player.name field="name" %}
				</td>
			{% endfor %}
			<td class="dead-space" colspan="2">&nbsp;</td>
		</tr>
	</tfoot>
	<tbody>
		{% for player in players %}
			<tr>
				{% if includeplace %}
					<td>{{ player.place }}</td>
				{% endif %}
				<td class="player-name">
					{% include snippets/member_link.html value=player.name field="name" %}
				</td>
				{% if includerating %}
					<td>{{ player.rating }}</td>
				{% endif %}
				{% for playerb in players %}
					{% include snippets/all_play_all_result.html playera=player.name playerb=playerb.name results=results %}
				{% endfor %}
				<td class="score">
					{% if player.score %}
						{% include snippets/rendered_score.html score=player.score %}
					{% endif %}
				</td>
				<td class="played">
					{% if player.played %}
						<span class="played" title="Out of {{ player.played }} games played">/ {{ player.played }}</span>
					{% endif %}
				</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
