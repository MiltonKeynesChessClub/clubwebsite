{% assign results = site.data[ include.datafile ] %}
{% assign playercount = results.players.size %}
{% assign includeplace = results.players[0].place %}
{% assign includerating = results.players[0].rating %}

<table class="all-play-all">
	<thead>
		<tr>
			{% if includeplace %}
				<th>Place</th>
			{% endif %}
			<th class="player-name">Player</th>
			{% if includerating %}
				<th>Rating</th>
			{% endif %}
			<th colspan="{{ playercount }}">Results</th>
			<th class="score">Score</th>
		</tr>
	</thead>
	<tfoot>
		<tr>
			<td colspan="2" class="dead-space">&nbsp;</td>
			{% for player in results.players %}
				<td class="player-name-vertical">
					{% include snippets/member_link.html value=player.id field="slug" %}
				</td>
			{% endfor %}
			<td class="dead-space">&nbsp;</td>
		</tr>
	</tfoot>
	<tbody>
		{% for player in results.players %}
			<tr>
				{% if includeplace %}
					<td>{{ player.place }}</td>
				{% endif %}
				<td class="player-name">
					{% include snippets/member_link.html value=player.id field="slug" %}
				</td>
				{% if includerating %}
					<td>{{ player.rating }}</td>
				{% endif %}
				{% for playerb in results.players %}
					{% include snippets/all_play_all_result.html playera=player.id playerb=playerb.id results=results.results %}
				{% endfor %}
				<td class="score">
					{% if player.score %}
						{{ player.score | replace: ".5", "&frac12;" | replace: "0&frac12;", "&frac12;" }}
						{% if player.played %}
							<span class="played">/ {{ player.played }}</span>
						{% endif %}
					{% endif %}
				</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
